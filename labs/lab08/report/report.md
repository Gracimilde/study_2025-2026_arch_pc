> **Отчет по лабораторной работе №8**

# Программирование цикла. Обработка аргументов командной строки. {#программирование-цикла.-обработка-аргументов-командной-строки. .unnumbered}

> ФИО: Маркеш Виейра Нанке Грасимилде

#  Цель работы

> Приобретение навыков написания программ с использованием циклов и
> обработкой аргументов командной строки.

# Задание

1.  Реализация циклом в NASM

2.  Обработка аргументов командной строки

3.  Задание для самостоятельной работы

# Теоретическое введение

Стек --- это структура данных, организованная по принципу LIFO («Last In
--- First Out» или «последним пришёл --- первым ушёл»). Стек является
частью архитектуры процессора и реализован на аппаратном уровне. Для
работы со стеком в процессоре есть специальные регистры (ss, bp, sp) и
команды.

> Основной функцией стека является функция сохранения адресов возврата и
> передачи аргументов при вызове процедур. Кроме того, в нём выделяется
> память для локальных переменных и могут временно храниться значения
> регистров.

# Выполнение лабораторной работы

## Реализация циклов в NASM

Создаю каталог для программ лабораторной работы №8 и файл lab8-1.asm,

куда буду копировать программу из листинга. (рис. -fig.4.1).

![Создание каталога](media/image1.jpeg){width="5.8597222222222225in"
height="0.90625in"}

> ***Создание каталога***
>
> Копирую в созданный файл программу из листинга. (рис. -fig.4.2).

![Копирование программы из
листинга](media/image2.jpeg){width="5.8277777777777775in"
height="5.653472222222222in"}

> ***Копирование программы из листинга***

Запускаю программу, она показывает работу циклов в NASM (рис. -fig.4.3).

> ![Запуск программы](media/image3.jpeg){width="5.851388888888889in"
> height="2.4993055555555554in"}
>
> ***Запуск программы***
>
> Изменяю изначальную программу так, что в теле цикла я изменяю значение
> регистра ecx (рис. -fig.4.4).
>
> ![Изменение программы](media/image4.jpeg){width="4.665972222222222in"
> height="5.166666666666667in"}
>
> ***Изменение программы***
>
> Из-за того, что теперь регистр ecx на каждой итерации уменьшается на 2
>
> значения, количество итераций уменьшается вдвое ((рис. -fig.4.5).
>
> ![](media/image5.png){width="4.602777777777778in" height="1.35625in"}
>
> ***Запуск измененной программы***

Добавляю команды push и pop в программу (рис. -fig.4.6).

> ![](media/image6.png){width="6.497222222222222in"
> height="5.330555555555556in"}
>
> ***Добавление push и pop в цикл программы***
>
> Теперь количество итераций совпадает введенному N, но произошло
> смещение выводимых чисел на -1 ((рис. -fig.4.7).
>
> ![](media/image7.png){width="6.497222222222222in"
> height="2.9145833333333333in"}
>
> ***Запуск измененной программы***

## Обработка аргументов командной строки

Создаю новый файл для программы и копирую в него код из следующего
листинга (рис. -fig.4.8).

> ![](media/image8.png){width="6.496527777777778in"
> height="5.961111111111111in"}
>
> ***Копирование программы из листинга***

Компилирую программу и запускаю, указав аргументы. Программой было
обратоно то же количество аргументов, что и было введено (рис.
-fig.4.9).

> ![](media/image9.png){width="6.496527777777778in"
> height="1.4819444444444445in"}
>
> ***Запуск второй программы***

Создаю новый файл для программы и копирую в него код из третьего
листинга (рис. -fig.4.10).

> ![](media/image10.png){width="6.495833333333334in"
> height="5.916666666666667in"}
>
> ***Копирование программы из третьего листинга***

Компилирую программу и запускаю, указав в качестве аргументов

некоторые числа, программа их складывает (рис. -fig.4.11).

> ![](media/image11.png){width="6.497916666666667in"
> height="1.1604166666666667in"}
>
> ***Запуск третьей программы***

Изменяю поведение программы так, чтобы указанные аргументы она

умножала, а не складывала (рис. -fig.4.12).

> ![](media/image12.png){width="5.808333333333334in"
> height="4.379166666666666in"}
>
> ***Изменение третьей программы***
>
> Программа действительно теперь умножает данные на вход числа (рис.

-fig.4.13).

> ![](media/image13.png){width="6.497222222222222in"
> height="1.2319444444444445in"}
>
> ***Запуск измененной третьей программы***

## Задание для самостоятельной работы

Пишу программму, которая будет находить сумма значений для функции

f(x) = 10(x - 1), которая совпадает с моим вариантом - 17.

Код программы:

> %include \'in_out.asm\'
>
> SECTION .data
>
> msg_func db \'Функция: f(x) = 10(x - 1)\', 0h msg_res db \'Результат:
> \', 0h
>
> SECTION .text
>
> global \_start
>
> \_start:
>
> *; Показываем функцию*
>
> mov eax, msg_func
>
> call sprintLF
>
> pop ecx *; Извлекаем количество аргументов*
>
> pop eax *; Извлекаем имя программы*
>
> sub ecx, 1 *; Убираем имя программы из количества*
>
> mov ebx, 0 *; Сумма начинается с 0*
>
> process_loop:
>
> pop eax *; Извлекаем x_i*
>
> call atoi *; Преобразуем в число*
>
> *; === f(x) = 10(x - 1) ===*
>
> sub eax, 1 *; x - 1*
>
> mov edx, eax *; Сохраняем (x-1) в EDX*
>
> add eax, eax *; 2(x-1)* add eax, eax *; 4(x-1)* add eax, eax *;
> 8(x-1)*
>
> add eax, edx *; 8(x-1) + (x-1) = 9(x-1)*
>
> add eax, edx *; 9(x-1) + (x-1) = 10(x-1)*
>
> add ebx, eax *; Добавляем f(x) к общей сумме*
>
> loop process_loop
>
> *; Показываем результат*
>
> mov eax, msg_res
>
> call sprint mov eax, ebx call iprintLF
>
> call quit
>
> Проверяю работу программы, указав в качестве аргумента несколько чисел

(рис. -fig.4.14).

> ![](media/image14.png){width="6.496527777777778in"
> height="1.3493055555555555in"}
>
> ***Запуск программы для самостоятельной работы***

# Выводы

В результате выполнения данной лабораторной работы я приобрела навыки
написания программ с использованием циклов, а также научилась
обрабатывать аргументы командной строки.

# Список литературы

1.  [Курс на ТУИС](https://esystem.rudn.ru/course/view.php?id=112)

2.  [Лабораторная работа
    №8](https://esystem.rudn.ru/pluginfile.php/2089095/mod_resource/content/0/Лабораторная%20работа%20№8.%20Программирование%20цикла.%20Обработка%20аргументов%20командной%20строки.pdf)
